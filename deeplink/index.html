<html>

<head>
    <meta name="apple-mobile-web-app-capable" />
    <!-- start Mixpanel -->
    <script type="text/javascript">
    (function(e, b) {
        if (!b.__SV) {
            var a, f, i, g;
            window.mixpanel = b;
            b._i = [];
            b.init = function(a, e, d) {
                function f(b, h) {
                    var a = h.split(".");
                    2 == a.length && (b = b[a[0]], h = a[1]);
                    b[h] = function() {
                        b.push([h].concat(Array.prototype.slice.call(arguments, 0)))
                    }
                }
                var c = b;
                "undefined" !== typeof d ? c = b[d] = [] : d = "mixpanel";
                c.people = c.people || [];
                c.toString = function(b) {
                    var a = "mixpanel";
                    "mixpanel" !== d && (a += "." + d);
                    b || (a += " (stub)");
                    return a
                };
                c.people.toString = function() {
                    return c.toString(1) + ".people (stub)"
                };
                i = "disable time_event track track_pageview track_links track_forms register register_once alias unregister identify name_tag set_config people.set people.set_once people.increment people.append people.union people.track_charge people.clear_charges people.delete_user".split(" ");
                for (g = 0; g < i.length; g++) f(c, i[g]);
                b._i.push([a, e, d])
            };
            b.__SV = 1.2;
            a = e.createElement("script");
            a.type = "text/javascript";
            a.async = !0;
            a.src = "undefined" !== typeof MIXPANEL_CUSTOM_LIB_URL ? MIXPANEL_CUSTOM_LIB_URL : "file:" === e.location.protocol && "//cdn.mxpnl.com/libs/mixpanel-2-latest.min.js".match(/^\/\//) ? "https://cdn.mxpnl.com/libs/mixpanel-2-latest.min.js" : "//cdn.mxpnl.com/libs/mixpanel-2-latest.min.js";
            f = e.getElementsByTagName("script")[0];
            f.parentNode.insertBefore(a, f)
        }
    })(document, window.mixpanel || []);
    mixpanel.init("34638ff57a5f4291f76a838412566030");
    </script>
    <!-- end Mixpanel -->
    <title></title>
</head>

<body>
    <script type="text/javascript">
    "use strict";
    var QueryString = function() {
        // This function is anonymous, is executed immediately and 
        // the return value is assigned to QueryString!
        var query_string = {};
        var query = window.location.search.substring(1);
        var vars = query.split("&");
        for (var i = 0; i < vars.length; i++) {
            var pair = vars[i].split("=");
            // If first entry with this name
            if (typeof query_string[pair[0]] === "undefined") {
                query_string[pair[0]] = decodeURIComponent(pair[1]);
                // If second entry with this name
            } else if (typeof query_string[pair[0]] === "string") {
                var arr = [query_string[pair[0]], decodeURIComponent(pair[1])];
                query_string[pair[0]] = arr;
                // If third or later entry with this name
            } else {
                query_string[pair[0]].push(decodeURIComponent(pair[1]));
            }
        }
        return query_string;
    }();
    if (QueryString.tlt && QueryString.tln) {
        var ll = QueryString.tlt + "," + QueryString.tln;
        if (QueryString.user) {
            mixpanel.identify(QueryString.user);
            if (QueryString.method) {
                mixpanel.track(
                    "Open", {
                        "method": QueryString.method,
                        "ll": ll
                    }
                );
            } else {
                mixpanel.track(
                    "Open", {
                        "method": "unknown",
                        "ll": ll
                    }
                );
            }
            mixpanel.people.increment("open_count");
            mixpanel.people.append("opens", ll);
        }
        if (QueryString.flt && QueryString.fln) {
            setTimeout(function() {
                window.location = "https://www.waze.com/livemap?from_lat=" + QueryString.flt + "&from_lon=" + QueryString.fln + "&to_lat=" + QueryString.tlt + "&to_lon=" + QueryString.tln + "&at_req=0&at_text=Now";
            }, 250);
        } else{
            setTimeout(function() {
                window.location = "https://www.waze.com/livemap?to_lat=" + QueryString.tlt + "&to_lon=" + QueryString.tln + "&at_req=0&at_text=Now";
            }, 250);
        }
        window.location = "waze://?ll=" + ll + "&navigate=yes";

    }
    </script>
</body>

</html>
